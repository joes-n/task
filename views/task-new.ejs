<%- include('partials/header') %>

<div class="dashboard">
    <div class="dashboard-header">
        <h2 class="signalis-glitch" data-text="Create New Task">Create New Task</h2>
        <div class="user-info">
            <a href="/tasks" class="btn btn-secondary">
                <span class="btn-label--baseline-fix signalis-glitch" data-text="← Back to Tasks">← Back to Tasks</span>
            </a>
        </div>
    </div>

    <div style="max-width: 600px; margin: 0 auto;">
        <% if (typeof error !== 'undefined') { %>
            <div class="alert alert-error">
                <span class="signalis-glitch" data-text="<%= error %>"><%= error %></span>
            </div>
        <% } %>

        <form action="/tasks" method="POST" class="task-edit-form">
            <div class="form-group">
                <label for="title" class="signalis-glitch" data-text="Title *">Title *</label>
                <input
                    type="text"
                    id="title"
                    name="title"
                    value="<%= typeof task !== 'undefined' ? task.title : '' %>"
                    required
                    maxlength="200"
                    autofocus
                >
            </div>

            <div class="form-group">
                <label for="description" class="signalis-glitch" data-text="Description">Description</label>
                <textarea
                    id="description"
                    name="description"
                    rows="4"
                    maxlength="1000"
                ><%= typeof task !== 'undefined' ? task.description : '' %></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="status" class="signalis-glitch" data-text="Status">Status</label>
                    <select id="status" name="status">
                        <option value="pending">Pending</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="priority" class="signalis-glitch" data-text="Priority">Priority</label>
                    <select id="priority" name="priority">
                        <option value="low">Low</option>
                        <option value="medium" selected>Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="dueDate" class="signalis-glitch" data-text="Due (include date and time)">Due (include date and time)</label>
                <input
                    type="datetime-local"
                    id="dueDate"
                    name="dueDate"
                    value="<%= typeof task !== 'undefined' ? task.dueDate : '' %>"
                >
            </div>

            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn btn-primary">
                    <span class="btn-label--baseline-fix signalis-glitch" data-text="Create Task">Create Task</span>
                </button>
                <a href="/tasks" class="btn btn-secondary">
                    <span class="btn-label--baseline-fix signalis-glitch" data-text="Cancel">Cancel</span>
                </a>
            </div>
        </form>
    </div>
</div>

<%- include('partials/footer') %>
